---
- name: Containerized version of $project
  hosts: all
  vars:
    # configuration specific for ansible-bender
    ansible_bender:
      base_image: registry.access.redhat.com/ubi7/ubi
      target_image:
        # command to run by default when invoking the container
        cmd: /entrypoint.sh
        name: $project
      working_container:
        volumes:
        # mount this git repo to the working container at /src
        - "{{ playbook_dir }}:/src"
  tasks:
  - name: copy over the entrypoint template
    file:
      src: entrypoint.sh
      dest: /tmp/entrypoint.sh
      mode: 0755
